webpackJsonp([0],{"../scss/app.scss":function(e,t){},"./actions/actionCreators.js":function(e,t,n){"use strict";function s(e,t){return function(n){n({type:"AUTO_CONNECT",token:e,user:t}),v(n)}}function o(){return function(e){e({type:"LOGOUT"}),v(e)}}function r(e,t,n){return function(s){s(a());var o={name:e,password:t,image:n};return console.log("ACTION | CREATE_ACCOUNT -> data => ",o),fetch("http://tpiut2017.cleverapps.io/join",{method:"POST",headers:{"Content-type":"application/json","Content-length":o.length},body:JSON.stringify(o)}).then(function(e){return e.json()}).then(function(e){console.log("ACTION | CREATE_ACCOUNT -> response => ",e),s(e.token?i(e):c()),v(s)}).catch(function(e){console.log("ACTION | CREATE_ACCOUNT -> error => ",e),s(c()),v(s)})}}function a(){return{type:"REQUEST_CREATE_ACCOUNT"}}function i(e){return{type:"RECEIVED_CREATE_ACCOUNT",token:e.token,user:e.user}}function c(){return{type:"FAIL_CREATE_ACCOUNT"}}function u(e,t){return function(n){n(l());var s={name:e,password:t};return console.log("ACTION | LOGIN -> data => ",s),fetch("http://tpiut2017.cleverapps.io/authenticate",{method:"POST",headers:{"Content-type":"application/json","Content-length":s.length},body:JSON.stringify(s)}).then(function(e){return e.json()}).then(function(e){console.log("ACTION | LOGIN -> response => ",e),n(e.token?E(e):m()),v(n)}).catch(function(e){console.log("ACTION | LOGIN -> error => ",e),n(m()),v(n)})}}function l(){return{type:"REQUEST_LOGIN"}}function E(e){return{type:"RECEIVED_LOGIN",token:e.token,user:e.user}}function m(e){return{type:"FAIL_LOGIN",error:e}}function f(e){return function(t){t(d());return fetch("http://tpiut2017.cleverapps.io/u/timeline",{method:"GET",headers:{Authorization:"Bearer:"+e}}).then(function(e){return e.json()}).then(function(e){console.log("ACTION | GET MESSY -> response => ",e),t(j.isArray(e)?p(e):g()),v(t)}).catch(function(e){console.log("ACTION | GET MESSY -> error => ",e),t(g()),v(t)})}}function d(){return{type:"REQUEST_GET_MESSY"}}function p(e){j.map(e,function(e){return e.date=A()(e.date).valueOf(),e});var t=j.orderBy(e,"date","desc");return j.map(t,function(e){return e.date=A()(e.date).fromNow(),e}),{type:"RECEIVED_GET_MESSY",messys:t}}function g(e){return{type:"FAIL_GET_MESSY",error:e}}function _(e,t){return function(n){n(y());var s={message:e};return console.log("ACTION | WRITE MESSAGE -> data => ",s),fetch("http://tpiut2017.cleverapps.io/u/timeline",{method:"POST",headers:{"Content-type":"application/json","Content-length":s.length,Authorization:"Bearer:"+t},body:JSON.stringify(s)}).then(function(e){return e.json()}).then(function(e){console.log("ACTION | WRITE MESSAGE -> response => ",e),e.id?(n(S()),n(f(t))):n(T()),v(n)}).catch(function(e){console.log("ACTION | WRITE MESSAGE -> error => ",e),n(m(e.error)),v(n)})}}function y(){return{type:"REQUEST_WRITE_MESSAGE"}}function S(){return{type:"RECEIVED_WRITE_MESSAGE"}}function T(e){return{type:"FAIL_WRITE_MESSAGE",error:e}}function N(e,t){return function(n){n(I());var s="http://tpiut2017.cleverapps.io/u/timeline/"+e;return fetch(s,{method:"DELETE",headers:{Authorization:"Bearer:"+t}}).then(function(e){console.log("ACTION | DELETE MESSAGE -> response => ",e),204===e.status?(n(C("Messy has been send")),n(f(t))):n(h())}).catch(function(e){console.log("ACTION | DELETE MESSAGE -> error => ",e),n(h()),v(n)})}}function I(){return{type:"REQUEST_DELETE_MESSAGE"}}function C(e){return{type:"RECEIVED_DELETE_MESSAGE",messy:e}}function h(e){return{type:"FAIL_DELETE_MESSAGE",error:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.autoConnect=s,t.logout=o,t.createAccount=r,t.request_create_account=a,t.received_create_account=i,t.fail_create_account=c,t.login=u,t.request_login=l,t.received_login=E,t.fail_login=m,t.getMessys=f,t.request_get_messys=d,t.received_get_messys=p,t.fail_get_messys=g,t.writeMessy=_,t.request_write_messy=y,t.received_write_messy=S,t.fail_write_messy=T,t.deleteMessy=N,t.request_delete_messy=I,t.received_delete_messy=C,t.fail_delete_messy=h;var O=n("../../node_modules/moment/moment.js"),A=n.n(O),j=n("../../node_modules/lodash/lodash.js"),v=function(e){setTimeout(function(){e({type:"HIDE_NOTIFICATION_LOGIN"}),e({type:"HIDE_NOTIFICATION_MESSY"})},5e3)}},"./components/App.js":function(e,t,n){"use strict";function s(e){return{token:e.login.token,user:e.login.user,messys:e.messy.messys,messyEdit:e.messy.messyEdit,loginNotif:{login:e.login.notif_login,create:e.login.notif_create,logout:e.login.notif_logout},messyNotif:{fetch:e.messy.notif_fetch,send:e.messy.notif_send,delete:e.messy.notif_delete}}}function o(e){return n.i(r.bindActionCreators)(i,e)}var r=n("../../node_modules/redux/es/index.js"),a=n("../../node_modules/react-redux/lib/index.js"),i=(n.n(a),n("./actions/actionCreators.js")),c=n("./components/Main.js"),u=n.i(a.connect)(s,o)(c.a);t.a=u},"./components/CreateAccount.js":function(e,t,n){"use strict";var s=n("../../node_modules/react/react.js"),o=n.n(s),r=function(e){var t={login:"",password:"",image:""};e.token&&e.router.push("/messys");var n=function(n){n.preventDefault(),e.createAccount(t.login,t.password,t.image)},s=function(e,n){return t[e]=n};return o.a.createElement("form",{onSubmit:n,className:"user-form"},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Login : "),o.a.createElement("input",{type:"text",id:"login",onChange:function(e){return s("login",e.target.value)},autoComplete:"off"})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Password : "),o.a.createElement("input",{type:"password",id:"password",onChange:function(e){return s("password",e.target.value)}})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Url image : "),o.a.createElement("input",{type:"text",id:"image",onChange:function(e){return s("image",e.target.value)},autoComplete:"off"})),o.a.createElement("div",{className:"form-group"},o.a.createElement("button",{type:"submit"},"Create")))};t.a=r},"./components/ListMessys.js":function(e,t,n){"use strict";var s=n("../../node_modules/react/react.js"),o=n.n(s),r=n("../../node_modules/lodash/lodash.js"),a=n.n(r),i=n("./components/MessyEdit.js"),c=n("./components/MessyDisplay.js"),u=n("../../node_modules/jwt-decode/lib/index.js"),l=n.n(u),E=function(e){var t=[];if(e.token)if(!e.messyNotif.fetch.inProgress&&a.a.isArray(e.messys)&&a.a.isEmpty(e.messys))e.getMessys(e.token);else{var n=l()(e.token).id;e.messys.map(function(s){var r=s.user_id===n;t.push(o.a.createElement(c.a,{key:s.id,id:s.id,user:s.user,isMyMessy:r,content:s.message,date:s.date,parent:e}))})}else e.router.push("/");return o.a.createElement("div",{className:"block-messys"},o.a.createElement("div",{className:"list-messys"},t),o.a.createElement(i.a,{messy:null,parent:e}))};t.a=E},"./components/Login.js":function(e,t,n){"use strict";var s=n("../../node_modules/react/react.js"),o=n.n(s),r=function(e){var t={login:"",password:""};e.token&&(console.log("push /messys"),e.router.push("/messys"));var n=function(n){n.preventDefault(),e.login(t.login,t.password)},s=function(e,n){t[e]=n};return o.a.createElement("form",{onSubmit:n,className:"user-form"},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Login : "),o.a.createElement("input",{type:"text",id:"login",onChange:function(e){return s("login",e.target.value)},autoComplete:"off"})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Password : "),o.a.createElement("input",{type:"password",id:"password",onChange:function(e){return s("password",e.target.value)}})),o.a.createElement("div",{className:"form-group"},o.a.createElement("button",{type:"submit"},"Login")))};t.a=r},"./components/Main.js":function(e,t,n){"use strict";var s=n("../../node_modules/react/react.js"),o=n.n(s),r=n("./components/Notification.js"),a=n("../../node_modules/react-router/es/index.js"),i=function(e){var t=[],n="";_.isUndefined(e.token)&&sessionStorage.getItem("token")&&sessionStorage.getItem("user")&&e.autoConnect(sessionStorage.getItem("token"),JSON.parse(sessionStorage.getItem("user")));var s=function(t){t.preventDefault(),sessionStorage.clear(),e.logout()},i=function(t){t.preventDefault(),e.getMessys(e.token)};return e.token?(t.push(o.a.createElement("li",{key:"menu-"},o.a.createElement("a",{onClick:i},o.a.createElement("i",{className:"fa fa-refresh"}," ")," "))),t.push(o.a.createElement("li",{key:"menu-0"},o.a.createElement(a.d,{to:"/messys"},"List of messy"))),t.push(o.a.createElement("li",{key:"menu-1"},o.a.createElement("a",{onClick:s},"Logout"))),n=o.a.createElement("span",null," - ",o.a.createElement("i",{className:"fa fa-user"}," "))):(t.push(o.a.createElement("li",{key:"menu-2"},o.a.createElement(a.d,{to:"/sign-in"},"Sign In"))),t.push(o.a.createElement("li",{key:"menu-3"},o.a.createElement(a.d,{to:"/sign-up"},"Sign Up")))),o.a.createElement("div",{className:"block"},o.a.createElement("h1",{id:"title"},o.a.createElement(a.d,{to:"/"},"Messy ",o.a.createElement("i",{className:"fa fa-envelope-o"}," ")," ",n)),o.a.createElement("nav",null,o.a.createElement("ul",null,t)),o.a.createElement(r.a,{parent:e}),o.a.cloneElement(e.children,e))};t.a=i},"./components/MessyDisplay.js":function(e,t,n){"use strict";var s=n("../../node_modules/react/react.js"),o=n.n(s),r=n("./components/User.js"),a=function(e){var t="",n="messy",s=function(){e.parent.deleteMessy(e.id,e.parent.token)};return e.isMyMessy&&(t=o.a.createElement("a",{onClick:s},o.a.createElement("i",{className:"fa fa-times"}," ")),n+=" own-messy"),o.a.createElement("div",{className:n},o.a.createElement("div",{className:"user-block"},o.a.createElement(r.a,{name:e.user.name,image:e.user.image})),o.a.createElement("div",{className:"content-block"},o.a.createElement("p",null,e.content),o.a.createElement("div",{className:"delete-block"},t),o.a.createElement("div",{className:"date-block"},e.date)))};t.a=a},"./components/MessyEdit.js":function(e,t,n){"use strict";var s=n("../../node_modules/react/react.js"),o=n.n(s),r=function(e){var t=e.parent.messyEdit,n=function(n){n.preventDefault(),e.parent.writeMessy(t,e.parent.token)},s=function(e){return t=e.target.value},r=function(e){e.target.value=""};return o.a.createElement("form",{onSubmit:n,className:"write-form"},o.a.createElement("div",null,o.a.createElement("textarea",{id:"write-messy",onChange:s,onFocus:r}),o.a.createElement("button",{type:"submit"},o.a.createElement("i",{className:"fa fa-send"}," "))))};t.a=r},"./components/Notification.js":function(e,t,n){"use strict";var s=n("../../node_modules/react/react.js"),o=n.n(s),r=n("../../node_modules/lodash/lodash.js"),a=n.n(r),i=n("./components/NotificationSuccess.js"),c=n("./components/NotificationInProgress.js"),u=n("./components/NotificationFail.js"),l=n("../../node_modules/uuid/v4.js"),E=n("./utils/text_notification.js"),m=function(e){var t=e.parent.messyNotif,n=e.parent.loginNotif,s=[];return a.a.forOwn(t,function(e,t){var n=l();e.success&&s.push(o.a.createElement(i.a,{key:n,text:E[t+"_success"]})),e.inProgress&&s.push(o.a.createElement(c.a,{key:n,text:E[t+"_inProgress"]})),e.fail&&s.push(o.a.createElement(u.a,{key:n,text:E[t+"_fail"]}))}),a.a.forOwn(n,function(e,t){var n=l();a.a.isObject(e)?(e.success&&s.push(o.a.createElement(i.a,{key:n,text:E[t+"_success"]})),e.inProgress&&s.push(o.a.createElement(c.a,{key:n,text:E[t+"_inProgress"]})),e.fail&&s.push(o.a.createElement(u.a,{key:n,text:E[t+"_fail"]}))):e&&s.push(o.a.createElement(i.a,{key:n,text:E[t+"_success"]}))}),o.a.createElement("div",{className:"notification-block"},s)};t.a=m},"./components/NotificationFail.js":function(e,t,n){"use strict";var s=n("../../node_modules/react/react.js"),o=n.n(s),r=function(e){return o.a.createElement("div",{className:"fail"},e.text)};t.a=r},"./components/NotificationInProgress.js":function(e,t,n){"use strict";var s=n("../../node_modules/react/react.js"),o=n.n(s),r=function(e){return o.a.createElement("div",{className:"progress"},e.text," ",o.a.createElement("i",{className:"fa fa-spinner fa-spin"}," "))};t.a=r},"./components/NotificationSuccess.js":function(e,t,n){"use strict";var s=n("../../node_modules/react/react.js"),o=n.n(s),r=function(e){return o.a.createElement("div",{className:"success"},e.text)};t.a=r},"./components/User.js":function(e,t,n){"use strict";var s=n("../../node_modules/react/react.js"),o=n.n(s),r=function(e){return o.a.createElement("div",{className:"user"},o.a.createElement("img",{src:e.image,width:"50",height:"50",alt:e.name}),o.a.createElement("p",null,e.name))};t.a=r},"./index.js":function(e,t,n){"use strict";function s(e){return r.a.createElement(i.Provider,{store:E.a},r.a.createElement(c.a,{history:E.b},r.a.createElement(c.b,{path:"/",component:u.a},r.a.createElement(c.c,{component:d.a}," "),r.a.createElement(c.b,{path:"/create",component:m.a}," "),r.a.createElement(c.b,{path:"/sign-in",component:d.a}," "),r.a.createElement(c.b,{path:"/sign-up",component:m.a}," "),r.a.createElement(c.b,{path:"/messys",component:f.a}," "))))}Object.defineProperty(t,"__esModule",{value:!0});var o=n("../../node_modules/react/react.js"),r=n.n(o),a=n("../../node_modules/react-dom/index.js"),i=(n.n(a),n("../../node_modules/react-redux/lib/index.js")),c=(n.n(i),n("../../node_modules/react-router/es/index.js")),u=n("./components/App.js"),l=n("../scss/app.scss"),E=(n.n(l),n("./store.js")),m=n("./components/CreateAccount.js"),f=n("./components/ListMessys.js"),d=n("./components/Login.js");n.i(a.render)(r.a.createElement(s,null),document.getElementById("root"))},"./reducers/index.js":function(e,t,n){"use strict";var s=n("../../node_modules/redux/es/index.js"),o=n("../../node_modules/react-router-redux/lib/index.js"),r=(n.n(o),n("./reducers/login.js")),a=n("./reducers/messy.js"),i=n.i(s.combineReducers)({login:r.a,messy:a.a,routing:o.routerReducer});t.a=i},"./reducers/login.js":function(e,t,n){"use strict";function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case"REQUEST_LOGIN":return console.log("ACTION | LOGIN REQUEST ***"),Object.assign({},e,{notif_login:o.inProgressSnippet});case"RECEIVED_LOGIN":return console.log("ACTION | LOGIN RECEIVED ***"),sessionStorage.setItem("token",t.token),sessionStorage.setItem("user",JSON.stringify(t.user)),Object.assign({},e,{token:t.token,user:t.user,notif_login:o.successSnippet});case"FAIL_LOGIN":return console.log("ACTION | LOGIN FAIL ***"),Object.assign({},e,{notif_login:o.failSnippet});case"LOGOUT":return console.log("ACTION | LOGOUT ***"),Object.assign({},e,{token:null,user:null,notif_logout:!0});case"REQUEST_CREATE_ACCOUNT":return console.log("ACTION | CREATE ACCOUNT REQUEST ***"),Object.assign({},e,{notif_create:o.inProgressSnippet});case"RECEIVED_CREATE_ACCOUNT":return console.log("ACTION | CREATE ACCOUNT RECEIVED ***"),sessionStorage.setItem("token",t.token),sessionStorage.setItem("user",JSON.stringify(t.user)),Object.assign({},e,{token:t.token,user:t.user,notif_create:o.successSnippet});case"FAIL_CREATE_ACCOUNT":return console.log("ACTION | CREATE ACCOUNT FAIL ***"),Object.assign({},e,{notif_create:o.failSnippet});case"AUTO_CONNECT":return console.log("ACTION | AUTO CONNECT ***"),Object.assign({},e,{token:t.token,user:t.user,notif_login:o.successSnippet});case"HIDE_NOTIFICATION_LOGIN":return console.log("ACTION | HIDE NOTIFICATION LOGIN ***"),Object.assign({},e,{notif_login:o.initSnippet,notif_create:o.initSnippet,notif_logout:!1});default:return e}}var o=n("./utils/Utils.js");t.a=s},"./reducers/messy.js":function(e,t,n){"use strict";function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case"REQUEST_GET_MESSY":return console.log("ACTION | GET MESSY REQUEST ***"),Object.assign({},e,{notif_fetch:o.inProgressSnippet});case"RECEIVED_GET_MESSY":return console.log("ACTION | GET MESSY RECEIVED ***"),Object.assign({},e,{messys:t.messys,notif_fetch:o.successSnippet});case"FAIL_GET_MESSY":return console.log("ACTION | GET MESSY FAIL ***"),Object.assign({},e,{notif_fetch:o.failSnippet});case"REQUEST_WRITE_MESSAGE":return console.log("ACTION | WRITE MESSAGE REQUEST ***"),Object.assign({},e,{notif_send:o.inProgressSnippet});case"RECEIVED_WRITE_MESSAGE":return console.log("ACTION | WRITE MESSAGE RECEIVED ***"),Object.assign({},e,{messyEdit:"",notif_send:o.successSnippet});case"FAIL_WRITE_MESSAGE":return console.log("ACTION | WRITE MESSAGE FAIL ***"),Object.assign({},e,{notif_send:o.failSnippet});case"REQUEST_DELETE_MESSAGE":return console.log("ACTION | DELETE MESSAGE REQUEST ***"),Object.assign({},e,{notif_delete:o.inProgressSnippet});case"RECEIVED_DELETE_MESSAGE":return console.log("ACTION | DELETE MESSAGE RECEIVED ***"),Object.assign({},e,{notif_delete:o.successSnippet});case"FAIL_DELETE_MESSAGE":return console.log("ACTION | DELETE MESSY FAIL ***"),Object.assign({},e,{notif_delete:o.failSnippet});case"HIDE_NOTIFICATION_MESSY":return console.log("ACTION | HIDE NOTIFICATION MESSY ***"),Object.assign({},e,{notif_fetch:o.initSnippet,notif_send:o.initSnippet,notif_delete:o.initSnippet});default:return e}}var o=n("./utils/Utils.js");t.a=s},"./store.js":function(e,t,n){"use strict";n.d(t,"b",function(){return m});var s=n("../../node_modules/redux/es/index.js"),o=n("../../node_modules/react-router-redux/lib/index.js"),r=(n.n(o),n("../../node_modules/react-router/es/index.js")),a=n("./reducers/index.js"),i=n("../../node_modules/redux-thunk/lib/index.js"),c=n.n(i),u={login:{notif_login:{inProgress:!1,success:!1,fail:!1},notif_logout:!1,notif_create:{inProgress:!1,success:!1,fail:!1}},messy:{messyEdit:"",messys:[],notif_fetch:{inProgress:!1,success:!1,fail:!1},notif_send:{inProgress:!1,success:!1,fail:!1},notif_delete:{inProgress:!1,success:!1,fail:!1}}},l=n.i(s.compose)(n.i(s.applyMiddleware)(c.a),window.devToolsExtension?window.devToolsExtension():function(e){return e}),E=n.i(s.createStore)(a.a,u,l),m=n.i(o.syncHistoryWithStore)(r.e,E);t.a=E},"./utils/Utils.js":function(e,t){e.exports={inProgressSnippet:{inProgress:!0,success:!1,fail:!1},successSnippet:{inProgress:!1,success:!0,fail:!1},failSnippet:{inProgress:!1,success:!1,fail:!0},initSnippet:{success:!1,fail:!1}}},"./utils/text_notification.js":function(e,t){e.exports={login_inProgress:"Login in progress",login_success:"Login success",login_fail:"Login has fail",logout_success:"Logout has succeeded",create_inProgress:"Creation of your profile is in progress",create_success:"Your profile has been created",create_fail:"Creation of your profile has failed",fetch_inProgress:"The list of Messys is arriving",fetch_success:"The list of Messys is here",fetch_fail:"Fetching the list of Messys has failed",send_inProgress:"Sending of your Messy is in progress",send_success:"Your Messy has been send",send_fail:"Sending of the Messy has failed",delete_inProgress:"Deleting in progress",delete_success:"Deleting of the Messy has succeeded",delete_fail:"Deleting has failed"}}},["./index.js"]);